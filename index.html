<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JT Print - Professioneller 3D-Druck Service</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
<div class="bg-animation"></div>

<!-- ===================== HEADER ===================== -->
<header>
    <nav>
        <div class="logo-container">
            <img src="https://i.postimg.cc/433yTPrC/296ae7d7-58c3-4968-b8a8-e6b6add85135-removebg-preview.png" alt="JT Print Logo" class="logo-img">
            <span class="logo-text">JT Print</span>
        </div>
        <ul class="nav-links" id="navLinks">
            <li><a href="#home">Home</a></li>
            <li><a href="#services">Services</a></li>
            <li><a href="#gallery">Galerie</a></li>
            <li><a href="#products">Produkte</a></li>
        </ul>
        <!-- Admin Tabs -->
        <ul class="admin-tabs hidden" id="adminTabs">
            <li><button class="admin-tab active" data-tab="orders" onclick="switchAdminTab('orders')">üì¶ Bestellungen</button></li>
            <li><button class="admin-tab" data-tab="products" onclick="switchAdminTab('products')">üè∑Ô∏è Produkte</button></li>
            <li><button class="admin-tab" data-tab="gallery" onclick="switchAdminTab('gallery')">üñºÔ∏è Galerie</button></li>
            <li><button class="admin-tab" data-tab="chat" onclick="switchAdminTab('chat')">üí¨ Chat</button></li>
        </ul>
        <ul class="nav-right">
            <li id="navAuth"><button class="btn-secondary" onclick="showModal('loginModal')">Anmelden</button></li>
            <li class="hidden" id="navCart"><div class="cart-icon" onclick="showCart()">üõí <span class="cart-count" id="cartCount">0</span></div></li>
            <li class="hidden" id="navSettings"><button class="btn-icon" onclick="showModal('settingsModal')">‚öôÔ∏è</button></li>
        </ul>
    </nav>
</header>

<!-- ===================== ADMIN PANEL ===================== -->
<div class="admin-panel hidden" id="adminPanel">
    <div class="admin-section active" id="adminOrders">
        <h2 class="section-title">üì¶ Bestellungsverwaltung</h2>
        <div class="admin-orders-grid" id="adminOrdersList"><p class="empty-state">Keine Bestellungen.</p></div>
    </div>
    <div class="admin-section hidden" id="adminProducts">
        <h2 class="section-title">üè∑Ô∏è Produktverwaltung</h2>
        <button class="btn-primary" onclick="showModal('addProductModal')">+ Neues Produkt</button>
        <div class="admin-product-grid" id="adminProductList"></div>
    </div>
    <div class="admin-section hidden" id="adminGallery">
        <h2 class="section-title">üñºÔ∏è Galerie-Verwaltung</h2>
        <button class="btn-primary" onclick="showModal('addGalleryModal')">+ Neues Galerie-Bild</button>
        <div class="admin-product-grid" id="adminGalleryList"></div>
    </div>
    <div class="admin-section hidden" id="adminChat">
        <h2 class="section-title">üí¨ Chat-Verwaltung</h2>
        <div class="admin-chat-layout">
            <div class="admin-chat-list" id="adminChatList"><p class="empty-state">Keine Chats.</p></div>
            <div class="admin-chat-view" id="adminChatView">
                <div class="admin-chat-messages" id="adminChatMessages"><p class="empty-state">W√§hlen Sie einen Chat aus.</p></div>
                <div class="admin-chat-input-area hidden" id="adminChatInputArea">
                    <input type="text" class="chat-input" id="adminChatInput" placeholder="Nachricht an Kunde‚Ä¶" onkeypress="adminSendMsg(event)">
                    <button class="btn-primary small" onclick="adminSendMsg()">‚Üí</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ===================== CUSTOMER FRONTEND ===================== -->
<div id="customerFrontend">
    <section class="hero" id="home">
        <h1>Professioneller 3D-Druck<br>f√ºr Ihre Ideen</h1>
        <p>Laden Sie Ihr Design hoch oder lassen Sie uns Ihr individuelles 3D-Modell erstellen.</p>
        <div class="hero-buttons">
            <button class="btn-primary" onclick="showUploadModal()">Design hochladen</button>
            <button class="btn-secondary" onclick="toggleChatWindow()">Custom Design anfragen</button>
        </div>
    </section>
    <div class="container">
        <section id="services">
            <h2 class="section-title">Unsere Services</h2>
            <div class="services-grid">
                <div class="service-card">
                    <h3>üñ®Ô∏è 3D-Druck</h3>
                    <p>Laden Sie Ihre STL-Datei hoch oder beschreiben Sie Ihr Modell.</p>
                    <ul><li>Bambu Lab P1S</li><li>Druckgr√∂√üe bis 25√ó25 cm</li><li>Hardened Steel & Stainless Steel Nozzle</li><li>50% Rabatt auf PLA-Grundpreis!</li></ul>
                </div>
                <div class="service-card">
                    <h3>‚úèÔ∏è Custom Design</h3>
                    <p>Individuelles 3D-Modell erstellen lassen.</p>
                    <ul><li>CAD-Modellierung mit OnShape</li><li>20‚Ç¨/Stunde oder VB</li><li>Design + Fertigung</li></ul>
                </div>
                <div class="service-card">
                    <h3>‚ö° Express</h3>
                    <p>Bevorzugte Bearbeitung f√ºr eilbed√ºrftige Auftr√§ge.</p>
                    <ul><li>Priorisiert</li><li>Schnellere Lieferung</li><li>+30% Aufpreis</li></ul>
                </div>
            </div>
        </section>
        <section id="gallery">
            <h2 class="section-title">Portfolio & Beispiele</h2>
            <div class="product-grid" id="galleryGrid"></div>
        </section>
        <section id="products">
            <h2 class="section-title">Produktkatalog</h2>
            <div class="tabs">
                <button class="tab active" onclick="switchProductTab('internet',this)">Internet-Modelle</button>
                <button class="tab" onclick="switchProductTab('custom',this)">Eigene Designs</button>
            </div>
            <div id="internetTab" class="tab-content active"><div class="product-grid" id="internetProducts"></div></div>
            <div id="customTab" class="tab-content"><div class="product-grid" id="customProducts"></div></div>
        </section>
    </div>
</div>

<!-- ===================== CHAT WIDGET ===================== -->
<div class="chat-widget">
    <button class="chat-button" onclick="toggleChatWindow()">üí¨</button>
    <div class="chat-window" id="chatWindow">
        <div class="chat-header"><span>Custom Design Anfrage</span><button class="chat-close-btn" onclick="toggleChatWindow()">√ó</button></div>
        <div class="chat-messages" id="chatMessages">
            <div class="chat-msg admin">
                Hallo! Willkommen bei <strong>JT Print</strong>.<br><br>
                Beschreiben Sie bitte Ihr Wunschprojekt so detailliert wie m√∂glich (Ma√üe, Funktion, Referenzen).<br><br>
                <strong>Stundensatz: 20‚Ç¨/h | Preisvorschlag m√∂glich</strong><br><br>
                ‚ö†Ô∏è Es kann sein, dass Sie nach weiteren Informationen zum Design gefragt werden ‚Äì bitte bleiben Sie auf dem Laufenden.<br><br>
                üìß <em>Falls Sie keine Antwort bekommen: Bitte √ºberpr√ºfen Sie auch Ihren <strong>Spam-Ordner</strong>!</em>
            </div>
        </div>
        <div class="chat-input-container">
            <input type="text" class="chat-input" id="chatInput" placeholder="Ihre Nachricht‚Ä¶" onkeypress="sendChat(event)">
            <button class="btn-primary small" onclick="sendChat()">‚Üí</button>
        </div>
    </div>
</div>

<!-- ===================== MODALS ===================== -->
<!-- LOGIN -->
<div class="modal" id="loginModal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('loginModal')">√ó</button>
        <h2>Anmelden</h2>
        <div class="form-group"><label>E-Mail</label><input type="email" id="loginEmail"></div>
        <div class="form-group"><label>Passwort</label><input type="password" id="loginPassword"></div>
        <div class="msg error hidden" id="loginError"></div>
        <button class="btn-primary full" onclick="handleLogin()">Anmelden</button>
        <p class="modal-footer-text">Noch kein Konto? <a href="#" onclick="showModal('registerModal');closeModal('loginModal')">Registrieren</a></p>
    </div>
</div>
<!-- REGISTER -->
<div class="modal" id="registerModal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('registerModal')">√ó</button>
        <h2>Registrieren</h2>
        <div class="form-group"><label>Name</label><input type="text" id="regName"></div>
        <div class="form-group"><label>Geburtsdatum</label><input type="date" id="regBirthdate"></div>
        <div class="form-group"><label>E-Mail</label><input type="email" id="regEmail"></div>
        <div class="form-group"><label>Passwort</label><input type="password" id="regPassword" minlength="6"></div>
        <div class="form-group"><label>Passwort wiederholen</label><input type="password" id="regPassConf"></div>
        <div class="msg error hidden" id="regError"></div>
        <div class="msg success hidden" id="regSuccess">
            ‚úÖ Registrierung erfolgreich! Bitte best√§tigen Sie Ihre E-Mail.<br>
            üìß <strong>√úberpr√ºfen Sie auch Ihren Spam-Ordner!</strong>
        </div>
        <button class="btn-primary full" onclick="handleRegister()">Registrieren</button>
    </div>
</div>
<!-- UPLOAD -->
<div class="modal" id="uploadModal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('uploadModal')">√ó</button>
        <h2>3D-Modell hochladen</h2>
        <div class="form-group"><label>Beschreibung</label><textarea id="uploadDesc" placeholder="Beschreiben Sie Ihr Wunschmodell‚Ä¶"></textarea></div>
        <div class="form-group"><label>Gewicht (g)</label><input type="number" id="uploadWeight" min="1" step="0.1" oninput="calcUploadPrice()"></div>
        <div class="form-group">
            <label>Material</label>
            <select id="uploadMaterial" onchange="calcUploadPrice(); checkNozzleCompat()">
                <option value="pla">Bambu Lab PLA (50% Rabatt auf Grundpreis!)</option>
                <option value="tpu">TPU (+10‚Ç¨)</option>
                <option value="asa">ASA (+10‚Ç¨)</option>
                <option value="abs">ABS (+10‚Ç¨)</option>
                <option value="petg">PETG (+10‚Ç¨)</option>
                <option value="pla_cf">PLA CF (+10‚Ç¨)</option>
                <option value="petg_cf">PETG CF (+10‚Ç¨)</option>
                <option value="pla_wood">PLA Wood (+10‚Ç¨)</option>
                <option value="pla_glow">PLA Glow (+10‚Ç¨)</option>
                <option value="pla_marble">PLA Marble (+10‚Ç¨)</option>
            </select>
        </div>
        <div class="form-group">
            <label>Nozzle</label>
            <select id="uploadNozzle" onchange="calcUploadPrice(); checkNozzleCompat()">
                <option value="hardened_04">0.4mm Hardened Steel</option>
                <option value="stainless_02">0.2mm Stainless Steel (+4‚Ç¨, nur PLA)</option>
            </select>
        </div>
        <div class="msg warning hidden" id="nozzleWarning">‚ö†Ô∏è Das 0.2mm Stainless Steel Nozzle ist nur mit PLA kompatibel!</div>
        <div class="form-group">
            <label>Express</label>
            <select id="uploadExpress" onchange="calcUploadPrice()"><option value="no">Nein</option><option value="yes">Ja (+30%)</option></select>
        </div>
        <div class="price-box hidden" id="uploadPriceBox">
            <div class="price-row"><span>Grundpreis:</span><span id="upBase"></span></div>
            <div class="price-row hidden" id="upDiscRow"><span class="discount-badge">-50%</span><span class="original-price">8.00‚Ç¨</span></div>
            <div class="price-row"><span>Material (Gewicht):</span><span id="upMat">0.00‚Ç¨</span></div>
            <div class="price-row hidden" id="upExtraRow"><span>Extras:</span><span id="upExtras">0.00‚Ç¨</span></div>
            <div class="price-row total"><span>Gesamt:</span><span id="upTotal">0.00‚Ç¨</span></div>
        </div>
        <div class="form-group"><label>Anmerkungen</label><textarea id="uploadNotes" placeholder="Farbe, Besonderes‚Ä¶"></textarea></div>
        <button class="btn-primary full" onclick="addUploadToCart()">In den Warenkorb</button>
    </div>
</div>
<!-- PRODUCT DETAIL -->
<div class="modal" id="productDetailModal">
    <div class="modal-content wide">
        <button class="modal-close" onclick="closeModal('productDetailModal')">√ó</button>
        <div class="product-detail-layout">
            <div class="product-detail-images">
                <div class="detail-main-wrap"><img class="detail-main-img" id="detailMainImg" src="" alt=""><div class="detail-main-emoji hidden" id="detailMainEmoji"></div></div>
                <div class="detail-thumbs" id="detailThumbs"></div>
            </div>
            <div class="product-detail-info">
                <h2 id="detailName"></h2>
                <p class="detail-desc" id="detailDesc"></p>
                <div class="detail-price-wrap"><span class="detail-price" id="detailPrice"></span></div>
                <div class="form-group"><label>Farbe</label><div class="color-selector" id="detailColors"></div></div>
                <div class="form-group">
                    <label>Menge</label>
                    <div class="qty-selector"><button class="qty-btn" onclick="changeQty(-1)">‚àí</button><span class="qty-val" id="detailQty">1</span><button class="qty-btn" onclick="changeQty(1)">+</button></div>
                </div>
                <button class="btn-primary full" onclick="addToCartFromDetail()">In den Warenkorb</button>
            </div>
        </div>
    </div>
</div>
<!-- CART -->
<div class="modal" id="cartModal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('cartModal')">√ó</button>
        <h2>üõí Warenkorb</h2>
        <div id="cartItemsList"><p class="empty-state">Warenkorb ist leer.</p></div>
        <div class="cart-total-row"><span>Gesamt:</span><span id="cartTotalDisplay">0.00‚Ç¨</span></div>
        <button class="btn-primary full" onclick="openCheckout()">Zur Kasse ‚Üí</button>
    </div>
</div>
<!-- CHECKOUT -->
<div class="modal" id="checkoutModal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('checkoutModal')">√ó</button>
        <h2>Bestellung abschlie√üen</h2>
        <h3 class="sub-heading">Versand</h3>
        <div class="form-group">
            <select id="shippingMethod" onchange="onShippingChange()">
                <option value="">Bitte w√§hlen‚Ä¶</option>
                <option value="pickup">Selbstabholung (Kostenlos)</option>
                <option value="standard">Standard (4.99‚Ç¨)</option>
                <option value="express_ship">Express (9.99‚Ç¨)</option>
            </select>
        </div>
        <div id="addressBlock" class="hidden">
            <div class="form-group"><label>Stra√üe</label><input type="text" id="chStreet"></div>
            <div class="form-group"><label>PLZ</label><input type="text" id="chZip"></div>
            <div class="form-group"><label>Stadt</label><input type="text" id="chCity"></div>
            <div class="form-group"><label>Land</label><input type="text" id="chCountry" value="Deutschland"></div>
        </div>
        <h3 class="sub-heading">Gutschein</h3>
        <div class="coupon-row"><input type="text" id="couponInput" placeholder="Code"><button class="btn-secondary small" onclick="applyCoupon()">Einl√∂sen</button></div>
        <div class="msg success hidden" id="couponMsg"></div>
        <h3 class="sub-heading">Zahlungsmethode</h3>
        <div class="form-group">
            <select id="paymentMethod" onchange="onPaymentChange()">
                <option value="">Bitte w√§hlen‚Ä¶</option>
                <option value="paypal">PayPal</option>
                <option value="stripe">Kreditkarte (Stripe)</option>
                <option value="transfer">√úberweisung</option>
                <option value="private">Privat</option>
            </select>
        </div>
        <div class="msg warning hidden" id="privateWarning">‚ö†Ô∏è Diese Option ist aktuell <strong>nur von bekannten Nutzern</strong> nutzbar. Falls Sie sie trotzdem w√§hlen, kann Ihre Bestellung m√∂glicherweise <strong>ignoriert</strong> werden.</div>
        <div class="checkout-summary">
            <div class="price-row"><span>Zwischensumme:</span><span id="chSubtotal">0.00‚Ç¨</span></div>
            <div class="price-row"><span>Versand:</span><span id="chShipping">0.00‚Ç¨</span></div>
            <div class="price-row hidden" id="chDiscRow"><span>Rabatt:</span><span id="chDiscount">-0.00‚Ç¨</span></div>
            <div class="price-row total"><span>Gesamt:</span><span id="chTotal">0.00‚Ç¨</span></div>
        </div>
        <button class="btn-primary full" onclick="placeOrder()">Zahlungspflichtig bestellen</button>
    </div>
</div>
<!-- SETTINGS -->
<div class="modal" id="settingsModal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('settingsModal')">√ó</button>
        <h2>‚öôÔ∏è Accounteinstellungen</h2>
        <h3 class="sub-heading">Pers√∂nliche Daten</h3>
        <div class="form-group"><label>Name</label><input type="text" id="settingsName"></div>
        <div class="form-group"><label>E-Mail</label><input type="email" id="settingsEmail" disabled></div>
        <div class="form-group"><label>Geburtsdatum</label><input type="date" id="settingsBirthdate"></div>
        <button class="btn-primary" onclick="saveSettings()">Speichern</button>
        <hr class="divider">
        <h3 class="sub-heading">Passwort √§ndern</h3>
        <div class="form-group"><label>Neues Passwort</label><input type="password" id="settNewPass"></div>
        <div class="form-group"><label>Wiederholen</label><input type="password" id="settNewPassConf"></div>
        <button class="btn-secondary" onclick="changePassword()">√Ñndern</button>
        <div class="msg error hidden" id="settError"></div>
        <div class="msg success hidden" id="settSuccess"></div>
        <hr class="divider">
        <h3 class="sub-heading">Benachrichtigungen</h3>
        <div id="notificationsList"></div>
        <hr class="divider">
        <button class="btn-danger full" onclick="handleLogout()">Abmelden</button>
    </div>
</div>
<!-- ADMIN: ADD/EDIT PRODUCT -->
<div class="modal" id="addProductModal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('addProductModal')">√ó</button>
        <h2 id="apTitle">+ Neues Produkt</h2>
        <input type="hidden" id="apId" value="">
        <div class="form-group"><label>Name</label><input type="text" id="apName"></div>
        <div class="form-group"><label>Beschreibung</label><textarea id="apDesc"></textarea></div>
        <div class="form-group"><label>Preis (‚Ç¨)</label><input type="number" id="apPrice" step="0.01"></div>
        <div class="form-group"><label>Kategorie</label><select id="apCat"><option value="internet">Internet-Modell</option><option value="custom">Eigenes Design</option></select></div>
        <div class="form-group"><label>Gewicht (g)</label><input type="number" id="apWeight"></div>
        <div class="form-group"><label>Farben (Hex, kommagetrennt)</label><input type="text" id="apColors" placeholder="#000000, #FFFFFF"></div>
        <div class="form-group"><label>Bild-URLs (kommagetrennt, eine pro Farbe)</label><textarea id="apImages" placeholder="https://‚Ä¶/rot.png, https://‚Ä¶/blau.png"></textarea></div>
        <div class="form-group"><label>Fallback-Emoji</label><input type="text" id="apEmoji" value="üì¶"></div>
        <button class="btn-primary full" onclick="saveProduct()">Speichern</button>
    </div>
</div>
<!-- ADMIN: ADD/EDIT GALLERY -->
<div class="modal" id="addGalleryModal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('addGalleryModal')">√ó</button>
        <h2 id="agTitle">+ Galerie-Bild</h2>
        <input type="hidden" id="agId" value="">
        <div class="form-group"><label>Name</label><input type="text" id="agName"></div>
        <div class="form-group"><label>Beschreibung</label><textarea id="agDesc"></textarea></div>
        <div class="form-group"><label>Bild-URL</label><input type="text" id="agImage"></div>
        <div class="form-group"><label>Fallback-Emoji</label><input type="text" id="agEmoji" value="üé®"></div>
        <button class="btn-primary full" onclick="saveGalleryItem()">Speichern</button>
    </div>
</div>
<!-- ADMIN: ORDER DETAIL -->
<div class="modal" id="orderDetailModal">
    <div class="modal-content wide">
        <button class="modal-close" onclick="closeModal('orderDetailModal')">√ó</button>
        <h2>Bestellung <span id="odId"></span></h2>
        <div class="order-detail-grid">
            <div>
                <h3 class="sub-heading">Artikel</h3>
                <div id="odItems"></div>
                <h3 class="sub-heading">Kunde</h3>
                <p id="odCustomer"></p>
                <h3 class="sub-heading">Zahlung</h3>
                <p id="odPayment"></p>
                <h3 class="sub-heading">Versand</h3>
                <p id="odShipping"></p>
                <h3 class="sub-heading">Chat-Verlauf</h3>
                <div class="order-chat-log" id="odChatLog"><p class="empty-state">Kein Chat.</p></div>
            </div>
            <div>
                <h3 class="sub-heading">Status</h3>
                <select class="status-select" id="odStatus" onchange="updateOrderStatus()">
                    <option value="aufgegeben">Bestellung wurde aufgegeben</option>
                    <option value="bearbeitet">Wird bearbeitet</option>
                    <option value="designed">Wird designed</option>
                    <option value="gedruckt">Wird gedruckt</option>
                    <option value="versendet">Wird versendet / auf dem Weg</option>
                    <option value="fragen">Fragen / Ungekl√§rte Punkte</option>
                    <option value="abgelehnt">Bestellung abgelehnt</option>
                </select>
                <h3 class="sub-heading">Kunden benachrichtigen</h3>
                <div class="form-group">
                    <select id="odNotifyType">
                        <option value="info">Allgemeine Info</option>
                        <option value="cost_more">Kosten werden h√∂her</option>
                        <option value="cost_less">Kosten werden geringer</option>
                        <option value="takes_longer">Dauert l√§nger als erwartet</option>
                        <option value="takes_shorter">Fertig fr√ºher als erwartet</option>
                    </select>
                </div>
                <div class="form-group"><textarea id="odNotifyMsg" placeholder="Nachricht‚Ä¶"></textarea></div>
                <button class="btn-primary" onclick="sendAdminNotify()">Benachrichtigung senden</button>
                <hr class="divider">
                <button class="btn-danger full" onclick="completeOrder()">‚úì Erledigt & Entfernen</button>
            </div>
        </div>
    </div>
</div>

<!-- ===================== SCRIPTS ===================== -->
<script type="module">
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, sendEmailVerification, onAuthStateChanged, signOut, updatePassword } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
import { getFirestore, collection, addDoc, getDocs, doc, setDoc, updateDoc, deleteDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

const firebaseConfig = {
          apiKey: "AIzaSyDazql6oJx5_z3hASwmo4200-OpQhodZVc",
          authDomain: "d-druckservice-jtprint.firebaseapp.com",
          projectId: "d-druckservice-jtprint",
          storageBucket: "d-druckservice-jtprint.firebasestorage.app",
          messagingSenderId: "247787543764",
          appId: "1:247787543764:web:b3cc1e7d05eb8aa2abef41"
     };

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db  = getFirestore(app);

window.FB = {
    auth, db,
    createUser: createUserWithEmailAndPassword,
    signIn: signInWithEmailAndPassword,
    sendVerification: sendEmailVerification,
    onAuth: onAuthStateChanged,
    signOut: () => signOut(auth),
    updatePassword,
    col: (p) => collection(db, p),
    doc: (p, id) => doc(db, p, id),
    addDoc, getDocs, setDoc, updateDoc, deleteDoc
};

onAuthStateChanged(auth, (user) => { if(window.onAuthChange) window.onAuthChange(user); });
</script>
<script src="script.js"></script>
</body>
</html>
